#pragma once

#include "ISnippetRepository.h"
#include "SnippetRepository.h"

#include <map>
#include <string>

namespace ls6502
{
//////////////////////////////////////////////////////////////
///
/// Typedefs
///
//////////////////////////////////////////////////////////////
typedef std::multimap<std::string, std::string> SnippetsT;

class SnippetRepository : public ISnippetRepository
{
  public:
    //////////////////////////////////////////////////////////////
    ///
    /// @brief Loads predefined snippets for 6502 ASM
    ///
    //////////////////////////////////////////////////////////////
    SnippetsT load() override;

  private:
    //////////////////////////////////////////////////////////////
    ///
    /// @brief Loads predefined snippets for 6502 ASM
    ///        from provider input stream
    ///
    /// @param [in] in
    ///
    //////////////////////////////////////////////////////////////
    void load(std::ifstream &snippetsFile);

  private:
    //////////////////////////////////////////////////////////////
    ///
    /// @brief Path to the predefined 6502 ASM snippets
    ///
    //////////////////////////////////////////////////////////////
    const char *PREDEFINED_SNIPPETS_PATH = "../../snippets/snippets.json";

    //////////////////////////////////////////////////////////////
    ///
    /// @brief Predefined snippets for 6052 ASM
    ///
    //////////////////////////////////////////////////////////////
    SnippetsT m_snippets;
};
} // namespace ls6502
